import{t as Kt,j as f,r as m,v as gt,B as je,o as K,R as Ut,f as B,T as Gt,w as Zt,x as Yt,d as Qe}from"./index-CouwpcHv.js";import{j as qt}from"./items-Xj_jdZG2.js";import{C as mt,B as Qt,a as Jt,p as ht,L as Xt,b as yt,c as vt,d as er,e as bt,f as I,g as xt,h as Ct,i as tr,A as rr,P as nr,j as or,k as ar,l as ir,m as sr}from"./chartColors-Dwn5-YMs.js";import{j as _e}from"./bots-DmHYWh_Z.js";/* empty css              */var Dt={exports:{}},cr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lr=cr,ur=lr;function Et(){}function wt(){}wt.resetWarningCache=Et;var fr=function(){function e(n,a,o,i,s,p){if(p!==ur){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wt,resetWarningCache:Et};return r.PropTypes=r,r};Dt.exports=fr();var pr=Dt.exports;const h=Kt(pr);function dr({children:e}){return f.jsx("div",{className:"chart-grid",children:e})}const ce=new Map(qt.map(e=>[e.Name,e]));function Ee(e){return ce.get(e)!==void 0}function gr(e){return ce.get(e)}function oe(e){const t=ce.get(e);return t===void 0?(console.log(`Failed to find item ${e}`),"Unknown"):t["Damage Type"]===void 0?t["Explosion Type"]===void 0?(console.log(`Item ${e} didn't have any damage type`),"Unknown"):t["Explosion Type"]:t["Damage Type"]}function Je(e){const t=ce.get(e);return e==="Core"?"Core":t===void 0?(console.log(`Failed to find item ${e}`),"Unknown"):(t.Slot===void 0&&console.log(`Item ${e} didn't have any slot`),t.Slot)}function Tt(){const[e,t]=m.useState({width:0,height:0});return m.useLayoutEffect(()=>{function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),e}mt.register(Qt,Jt,ht,Xt,yt,vt);function mr({chartTitle:e,values:t,barColors:r,maxValue:n,valuesArePercentages:a}){const o=Tt(),i=gt();return f.jsx(er,{data:hr(e,t,r),options:yr(e,n,i,o,a||!1),plugins:[bt]})}function hr(e,t,r){return{labels:t.map(n=>n.label),datasets:[{label:e,data:t.map(n=>n.value),backgroundColor:r,borderColor:r}]}}function yr(e,t,r,n,a){return{animation:{duration:300},color:I,indexAxis:"y",interaction:{axis:"y",intersect:!1},maintainAspectRatio:!1,plugins:{chartCanvasBackgroundColor:{color:r==="Cogmind"?xt:Ct},legend:{display:!1},tooltip:{callbacks:{label:o=>{if(a){const i=Number(o.formattedValue.replace(",","")).toFixed(1);return`${e}: ${i}%`}else{const i=Number(o.formattedValue.replace(",","")),s=o.chart.data.datasets[0].data.map(c=>Number(c)).reduce((c,d)=>c+d,0),p=(i*100/s).toFixed(1);return`${e}: ${i} (${p}%) `}}}},title:{color:I,font:{size:Math.min(20,n.width/22)},display:!0,text:e}},scales:{x:{border:{display:!1},grid:{color:tr},max:t,ticks:{color:I,precision:0,callback(o,i,s){return a?o+"%":o}}},y:{border:{display:!1},grid:{display:!1},ticks:{color:I}}}}}mt.register(rr,vt,ht,yt);function vr({chartTitle:e,values:t,backgroundColors:r,borderColors:n}){const a=Tt(),o=gt();return f.jsx(nr,{data:br(e,t,r,n),options:xr(e,o,a),plugins:[bt]})}function br(e,t,r,n){return{labels:t.map(a=>a.label),datasets:[{label:e,data:t.map(a=>a.value),backgroundColor:r,borderColor:n}]}}function xr(e,t,r){return{animation:{duration:300},color:I,maintainAspectRatio:!1,plugins:{chartCanvasBackgroundColor:{color:t==="Cogmind"?xt:Ct},title:{color:I,display:!0,font:{size:Math.min(20,r.width/22)},text:e},tooltip:{callbacks:{label:n=>{const a=Number(n.formattedValue.replace(",","")),o=n.chart.data.datasets[0].data.map(s=>Number(s)).reduce((s,p)=>s+p,0),i=(a*100/o).toFixed(1);return`${e}: ${a} (${i}%) `}}}}}}function T({chartTitle:e,values:t,displayOptions:r,forceChartType:n,valuesArePercentages:a}){const[o,i]=m.useState(!1),[s,p]=m.useState(!0);let c=!1;t=[...t],t.sort((g,E)=>s?E.value-g.value:g.value-E.value);const d=t.length>10;if(!o&&d){const g=t.splice(0,10);a||(g.push({label:"Other",value:t.reduce((E,S)=>E+S.value,0)}),c=!0),t=g}return r.chartType==="Pie"&&n!=="Bar"?Dr(e,t):Cr(t,e,c,d,i,o,p,s,a||!1)}function Cr(e,t,r,n,a,o,i,s,p){let c;r&&(!s||s&&e[10].value>1.2*e[0].value)&&(c=Math.floor(1.2*(s?e[0].value:e[9].value)));const d=f.jsx("div",{className:"horizontal-bar-chart-wrapper",style:{height:`${75+e.length*20}px`},children:f.jsx(mr,{chartTitle:t,values:e,barColors:r?or:ar,maxValue:c,valuesArePercentages:p})});let g;n&&(g=f.jsx(je,{onClick:()=>a(A=>!A),className:"button-expand-collapse",tooltip:o?'Click to collapse back to top 10 values and "Other" category':'Click to expand "Other" category into all values',children:o?"▲ Collapse ▲":"▼ Show All ▼"}));const E=f.jsx(je,{onClick:()=>i(A=>!A),className:"button-ascending-descending",tooltip:s?"Click to change sort order to descending":"Click to change sort order to ascending",children:s?"Sort ↓":"Sort ↑"});return f.jsxs("div",{className:"horizontal-bar-chart-container",children:[E,d,g]})}function Dr(e,t){return f.jsx("div",{className:"pie-chart-container",children:f.jsx(vr,{chartTitle:e,values:t,borderColors:ir,backgroundColors:sr})})}function Er({combatLogEntries:e,displayOptions:t}){t={...t,chartType:"Bar"};const r=wr(e,t);return f.jsx(T,{chartTitle:"Cogmind's Accuracy",values:r,displayOptions:t,valuesArePercentages:!0})}function wr(e,t){switch(t.category){case"Bot":case"Class":case"Critical":case"Part":case"Slot":return[]}const r=new Map;for(const a of e){if(a.sourceEntity!=="Cogmind")continue;let o;switch(t.category){case"Damage Type":o=oe(a.sourceWeapon);break;case"Weapon":o=a.sourceWeapon;break;default:K(t.category)}let i=r.get(o);i===void 0&&(i={hits:0,total:0}),i.hits+=a.projectilesHit,i.total+=a.projectilesTotal,r.set(o,i)}const n=[];for(const[a,o]of r)n.push({label:a,value:o.hits/o.total*100});return n}const jt=new Map(_e.map(e=>[e.Name,e])),Tr=new Map(_e.filter(e=>e["Short Name"]!==void 0).map(e=>[e["Short Name"],e])),jr=new Map(_e.filter(e=>e["Ally Name"]!==void 0).map(e=>[e["Ally Name"],e]));function Ar(e){return jr.get(e)}function te(e){return jt.get(e)}function kr(e){return Tr.get(e)}function Ae(e){const t=jt.get(e);return t===void 0?(console.log(`Failed to find bot ${e}`),"Unknown"):t.Class}function Sr(e,t,r,n){switch(n){case"Source":switch(r){case"Bot":return e.sourceEntity;case"Class":return Ae(e.sourceEntity);case"Critical":return t.criticalHitType||"None";case"Damage Type":return oe(e.sourceWeapon);case"Part":return t.damagedPart;case"Slot":return Je(t.damagedPart);case"Weapon":return e.sourceWeapon;default:K(r)}break;case"Target":switch(r){case"Bot":return t.damagedEntity;case"Class":return Ae(t.damagedEntity);case"Critical":return t.criticalHitType||"None";case"Damage Type":return oe(e.sourceWeapon);case"Part":return t.damagedPart;case"Slot":return Je(t.damagedPart);case"Weapon":return e.sourceWeapon;default:K(r);break}break;default:K(n)}return"Unknown"}function k(e,t,r,n){const a=new Map;for(const i of e)if(!(r.processCombatLogEntry!==void 0&&!r.processCombatLogEntry(i)))for(const s of i.damageEntries){if(r.processDamageEntry!==void 0&&!r.processDamageEntry(s))continue;const p=Sr(i,s,t,n);let c=a.get(p);c===void 0&&(c=0),c+=r.getValue(i,s),a.set(p,c)}const o=[];for(const[i,s]of a)o.push({label:i,value:s});return o}function Pr({combatLogEntries:e,displayOptions:t}){const r=Fr(e,t);return f.jsx(T,{chartTitle:"Cogmind's Parts Destroyed",values:r,displayOptions:t})}const Rr={processDamageEntry:e=>e.damagedPart!=="Core"&&e.targetDestroyed===!0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>1};function Fr(e,t){return k(e,t.category,Rr,"Target")}function _r({combatLogEntries:e,displayOptions:t}){const r=$r(e,t);return f.jsx(T,{chartTitle:"Critical Hits by Cogmind",values:r,displayOptions:t})}const Or={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.criticalHitType!==void 0,getValue:(e,t)=>1};function $r(e,t){return k(e,t.category,Or,"Target")}function Lr({combatLogEntries:e,displayOptions:t}){const r=Ir(e,t);return f.jsx(T,{chartTitle:"Critical Hits to Cogmind",values:r,displayOptions:t})}const Br={processCombatLogEntry:e=>e.sourceEntity!=="Cogmind",processDamageEntry:e=>e.criticalHitType!==void 0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>1};function Ir(e,t){return k(e,t.category,Br,"Source")}function Nr({combatLogEntries:e,displayOptions:t}){const r=Mr(e,t);return f.jsx(T,{chartTitle:"Damage Dealt",values:r,displayOptions:t})}const zr={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damageDealt!==void 0,getValue:(e,t)=>t.damageDealt};function Mr(e,t){return k(e,t.category,zr,"Target")}function Wr({combatLogEntries:e,displayOptions:t}){const r=Vr(e,t);return f.jsx(T,{chartTitle:"Damage Received",values:r,displayOptions:t})}const Hr={processDamageEntry:e=>e.damageDealt!==void 0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>t.damageDealt};function Vr(e,t){return k(e,t.category,Hr,"Source")}function Kr({combatLogEntries:e,displayOptions:t}){t={...t,chartType:"Bar"};const r=Ur(e,t);return f.jsx(T,{chartTitle:"Non-Cogmind Accuracy",values:r,displayOptions:t,valuesArePercentages:!0})}function Ur(e,t){switch(t.category){case"Critical":case"Part":case"Slot":return[]}const r=new Map;for(const a of e){if(a.sourceEntity==="Cogmind")continue;let o;switch(t.category){case"Bot":o=a.sourceEntity;break;case"Class":o=Ae(a.sourceEntity);break;case"Damage Type":o=oe(a.sourceWeapon);break;case"Weapon":o=a.sourceWeapon;break;default:K(t.category)}let i=r.get(o);i===void 0&&(i={hits:0,total:0}),i.hits+=a.projectilesHit,i.total+=a.projectilesTotal,r.set(o,i)}const n=[];for(const[a,o]of r)n.push({label:a,value:o.hits/o.total*100});return n}function Gr({combatLogEntries:e,displayOptions:t}){const r=Yr(e,t);return f.jsx(T,{chartTitle:"Overflow Damage Dealt",values:r,displayOptions:t})}const Zr={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damageDealt!==void 0&&e.damageOverflow===!0,getValue:(e,t)=>t.damageDealt};function Yr(e,t){return k(e,t.category,Zr,"Target")}function qr({combatLogEntries:e,displayOptions:t}){const r=Jr(e,t);return f.jsx(T,{chartTitle:"Overflow Damage Received",values:r,displayOptions:t})}const Qr={processDamageEntry:e=>e.damageDealt!==void 0&&e.damagedEntity==="Cogmind"&&e.damageOverflow===!0,getValue:(e,t)=>t.damageDealt};function Jr(e,t){return k(e,t.category,Qr,"Source")}function Xr({combatLogEntries:e,displayOptions:t}){const r=tn(e,t);return f.jsx(T,{chartTitle:"Parts Destroyed by Cogmind",values:r,displayOptions:t})}const en={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damagedPart!=="Core"&&e.targetDestroyed===!0,getValue:(e,t)=>1};function tn(e,t){return k(e,t.category,en,"Target")}function rn({combatLogEntries:e,displayOptions:t}){const r=on(e,t);return f.jsx(T,{chartTitle:"Sneak Attacks by Cogmind",values:r,displayOptions:t})}const nn={processCombatLogEntry:e=>e.sourceEntity==="Cogmind"&&e.sneakAttack===!0,getValue:(e,t)=>1};function on(e,t){return k(e,t.category,nn,"Target")}function N(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(d){try{c(n.next(d))}catch(g){i(g)}}function p(d){try{c(n.throw(d))}catch(g){i(g)}}function c(d){d.done?o(d.value):a(d.value).then(s,p)}c((n=n.apply(e,t||[])).next())})}function z(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(d){return p([c,d])}}function p(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(o=c[0]&2?a.return:c[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,c[1])).done)return o;switch(a=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],a=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Xe(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,o=[],i;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(s){i={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function et(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var an=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function G(e,t){var r=sn(e);if(typeof r.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function sn(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var n=t.split(".").pop().toLowerCase(),a=an.get(n);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}var cn=[".DS_Store","Thumbs.db"];function ln(e){return N(this,void 0,void 0,function(){return z(this,function(t){return ae(e)&&un(e.dataTransfer)?[2,gn(e.dataTransfer,e.type)]:fn(e)?[2,pn(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,dn(e)]:[2,[]]})})}function un(e){return ae(e)}function fn(e){return ae(e)&&ae(e.target)}function ae(e){return typeof e=="object"&&e!==null}function pn(e){return ke(e.target.files).map(function(t){return G(t)})}function dn(e){return N(this,void 0,void 0,function(){var t;return z(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(n){return G(n)})]}})})}function gn(e,t){return N(this,void 0,void 0,function(){var r,n;return z(this,function(a){switch(a.label){case 0:return e.items?(r=ke(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(mn))]):[3,2];case 1:return n=a.sent(),[2,tt(At(n))];case 2:return[2,tt(ke(e.files).map(function(o){return G(o)}))]}})})}function tt(e){return e.filter(function(t){return cn.indexOf(t.name)===-1})}function ke(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n)}return t}function mn(e){if(typeof e.webkitGetAsEntry!="function")return rt(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?kt(t):rt(e)}function At(e){return e.reduce(function(t,r){return et(et([],Xe(t),!1),Xe(Array.isArray(r)?At(r):[r]),!1)},[])}function rt(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=G(t);return Promise.resolve(r)}function hn(e){return N(this,void 0,void 0,function(){return z(this,function(t){return[2,e.isDirectory?kt(e):yn(e)]})})}function kt(e){var t=e.createReader();return new Promise(function(r,n){var a=[];function o(){var i=this;t.readEntries(function(s){return N(i,void 0,void 0,function(){var p,c,d;return z(this,function(g){switch(g.label){case 0:if(s.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return p=g.sent(),r(p),[3,4];case 3:return c=g.sent(),n(c),[3,4];case 4:return[3,6];case 5:d=Promise.all(s.map(hn)),a.push(d),o(),g.label=6;case 6:return[2]}})})},function(s){n(s)})}o()})}function yn(e){return N(this,void 0,void 0,function(){return z(this,function(t){return[2,new Promise(function(r,n){e.file(function(a){var o=G(a,e.fullPath);r(o)},function(a){n(a)})})]})})}var vn=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return r.some(function(i){var s=i.trim().toLowerCase();return s.charAt(0)==="."?n.toLowerCase().endsWith(s):s.endsWith("/*")?o===s.replace(/\/.*$/,""):a===s})}return!0};function nt(e){return Cn(e)||xn(e)||Pt(e)||bn()}function bn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cn(e){if(Array.isArray(e))return Se(e)}function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ot(Object(r),!0).forEach(function(n){St(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function St(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){return wn(e)||En(e,t)||Pt(e,t)||Dn()}function Dn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(e,t){if(e){if(typeof e=="string")return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}}function Se(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function En(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,o=!1,i,s;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(n.push(i.value),!(t&&n.length===t));a=!0);}catch(p){o=!0,s=p}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}return n}}function wn(e){if(Array.isArray(e))return e}var Tn="file-invalid-type",jn="file-too-large",An="file-too-small",kn="too-many-files",Sn=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var r=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:Tn,message:"File type must be ".concat(r)}},it=function(t){return{code:jn,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},st=function(t){return{code:An,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Pn={code:kn,message:"Too many files"};function Rt(e,t){var r=e.type==="application/x-moz-file"||vn(e,t);return[r,r?null:Sn(t)]}function Ft(e,t,r){if(F(e.size))if(F(t)&&F(r)){if(e.size>r)return[!1,it(r)];if(e.size<t)return[!1,st(t)]}else{if(F(t)&&e.size<t)return[!1,st(t)];if(F(r)&&e.size>r)return[!1,it(r)]}return[!0,null]}function F(e){return e!=null}function Rn(e){var t=e.files,r=e.accept,n=e.minSize,a=e.maxSize,o=e.multiple,i=e.maxFiles,s=e.validator;return!o&&t.length>1||o&&i>=1&&t.length>i?!1:t.every(function(p){var c=Rt(p,r),d=U(c,1),g=d[0],E=Ft(p,n,a),S=U(E,1),A=S[0],M=s?s(p):null;return g&&A&&!M})}function ie(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function re(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function ct(e){e.preventDefault()}function Fn(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function _n(e){return e.indexOf("Edge/")!==-1}function On(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Fn(e)||_n(e)}function j(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return t.some(function(s){return!ie(n)&&s&&s.apply(void 0,[n].concat(o)),ie(n)})}}function $n(){return"showOpenFilePicker"in window}function Ln(e){if(F(e)){var t=Object.entries(e).filter(function(r){var n=U(r,2),a=n[0],o=n[1],i=!0;return _t(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(o)||!o.every(Ot))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(r,n){var a=U(n,2),o=a[0],i=a[1];return at(at({},r),{},St({},o,i))},{});return[{description:"Files",accept:t}]}return e}function Bn(e){if(F(e))return Object.entries(e).reduce(function(t,r){var n=U(r,2),a=n[0],o=n[1];return[].concat(nt(t),[a],nt(o))},[]).filter(function(t){return _t(t)||Ot(t)}).join(",")}function In(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Nn(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function _t(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Ot(e){return/^.*\.[\w]+$/.test(e)}var zn=["children"],Mn=["open"],Wn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Hn=["refKey","onChange","onClick"];function Vn(e){return Gn(e)||Un(e)||$t(e)||Kn()}function Kn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Un(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gn(e){if(Array.isArray(e))return Pe(e)}function we(e,t){return qn(e)||Yn(e,t)||$t(e,t)||Zn()}function Zn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,t){if(e){if(typeof e=="string")return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,t)}}function Pe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yn(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,o=!1,i,s;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(n.push(i.value),!(t&&n.length===t));a=!0);}catch(p){o=!0,s=p}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}return n}}function qn(e){if(Array.isArray(e))return e}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lt(Object(r),!0).forEach(function(n){Re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e,t){if(e==null)return{};var r=Qn(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qn(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var Oe=m.forwardRef(function(e,t){var r=e.children,n=se(e,zn),a=Bt(n),o=a.open,i=se(a,Mn);return m.useImperativeHandle(t,function(){return{open:o}},[o]),Ut.createElement(m.Fragment,null,r(y(y({},i),{},{open:o})))});Oe.displayName="Dropzone";var Lt={disabled:!1,getFilesFromEvent:ln,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Oe.defaultProps=Lt;Oe.propTypes={children:h.func,accept:h.objectOf(h.arrayOf(h.string)),multiple:h.bool,preventDropOnDocument:h.bool,noClick:h.bool,noKeyboard:h.bool,noDrag:h.bool,noDragEventsBubbling:h.bool,minSize:h.number,maxSize:h.number,maxFiles:h.number,disabled:h.bool,getFilesFromEvent:h.func,onFileDialogCancel:h.func,onFileDialogOpen:h.func,useFsAccessApi:h.bool,autoFocus:h.bool,onDragEnter:h.func,onDragLeave:h.func,onDragOver:h.func,onDrop:h.func,onDropAccepted:h.func,onDropRejected:h.func,onError:h.func,validator:h.func};var Fe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Bt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=y(y({},Lt),e),r=t.accept,n=t.disabled,a=t.getFilesFromEvent,o=t.maxSize,i=t.minSize,s=t.multiple,p=t.maxFiles,c=t.onDragEnter,d=t.onDragLeave,g=t.onDragOver,E=t.onDrop,S=t.onDropAccepted,A=t.onDropRejected,M=t.onFileDialogCancel,le=t.onFileDialogOpen,$e=t.useFsAccessApi,Le=t.autoFocus,ue=t.preventDropOnDocument,Be=t.noClick,fe=t.noKeyboard,Ie=t.noDrag,P=t.noDragEventsBubbling,pe=t.onError,W=t.validator,H=m.useMemo(function(){return Bn(r)},[r]),Ne=m.useMemo(function(){return Ln(r)},[r]),de=m.useMemo(function(){return typeof le=="function"?le:ut},[le]),Z=m.useMemo(function(){return typeof M=="function"?M:ut},[M]),x=m.useRef(null),w=m.useRef(null),Nt=m.useReducer(Jn,Fe),ze=we(Nt,2),ge=ze[0],C=ze[1],zt=ge.isFocused,Me=ge.isFileDialogActive,Y=m.useRef(typeof window<"u"&&window.isSecureContext&&$e&&$n()),We=function(){!Y.current&&Me&&setTimeout(function(){if(w.current){var u=w.current.files;u.length||(C({type:"closeDialog"}),Z())}},300)};m.useEffect(function(){return window.addEventListener("focus",We,!1),function(){window.removeEventListener("focus",We,!1)}},[w,Me,Z,Y]);var _=m.useRef([]),He=function(u){x.current&&x.current.contains(u.target)||(u.preventDefault(),_.current=[])};m.useEffect(function(){return ue&&(document.addEventListener("dragover",ct,!1),document.addEventListener("drop",He,!1)),function(){ue&&(document.removeEventListener("dragover",ct),document.removeEventListener("drop",He))}},[x,ue]),m.useEffect(function(){return!n&&Le&&x.current&&x.current.focus(),function(){}},[x,Le,n]);var R=m.useCallback(function(l){pe?pe(l):console.error(l)},[pe]),Ve=m.useCallback(function(l){l.preventDefault(),l.persist(),X(l),_.current=[].concat(Vn(_.current),[l.target]),re(l)&&Promise.resolve(a(l)).then(function(u){if(!(ie(l)&&!P)){var v=u.length,b=v>0&&Rn({files:u,accept:H,minSize:i,maxSize:o,multiple:s,maxFiles:p,validator:W}),D=v>0&&!b;C({isDragAccept:b,isDragReject:D,isDragActive:!0,type:"setDraggedFiles"}),c&&c(l)}}).catch(function(u){return R(u)})},[a,c,R,P,H,i,o,s,p,W]),Ke=m.useCallback(function(l){l.preventDefault(),l.persist(),X(l);var u=re(l);if(u&&l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}return u&&g&&g(l),!1},[g,P]),Ue=m.useCallback(function(l){l.preventDefault(),l.persist(),X(l);var u=_.current.filter(function(b){return x.current&&x.current.contains(b)}),v=u.indexOf(l.target);v!==-1&&u.splice(v,1),_.current=u,!(u.length>0)&&(C({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),re(l)&&d&&d(l))},[x,d,P]),q=m.useCallback(function(l,u){var v=[],b=[];l.forEach(function(D){var V=Rt(D,H),L=we(V,2),he=L[0],ye=L[1],ve=Ft(D,i,o),ee=we(ve,2),be=ee[0],xe=ee[1],Ce=W?W(D):null;if(he&&be&&!Ce)v.push(D);else{var De=[ye,xe];Ce&&(De=De.concat(Ce)),b.push({file:D,errors:De.filter(function(Vt){return Vt})})}}),(!s&&v.length>1||s&&p>=1&&v.length>p)&&(v.forEach(function(D){b.push({file:D,errors:[Pn]})}),v.splice(0)),C({acceptedFiles:v,fileRejections:b,type:"setFiles"}),E&&E(v,b,u),b.length>0&&A&&A(b,u),v.length>0&&S&&S(v,u)},[C,s,H,i,o,p,E,S,A,W]),Q=m.useCallback(function(l){l.preventDefault(),l.persist(),X(l),_.current=[],re(l)&&Promise.resolve(a(l)).then(function(u){ie(l)&&!P||q(u,l)}).catch(function(u){return R(u)}),C({type:"reset"})},[a,q,R,P]),O=m.useCallback(function(){if(Y.current){C({type:"openDialog"}),de();var l={multiple:s,types:Ne};window.showOpenFilePicker(l).then(function(u){return a(u)}).then(function(u){q(u,null),C({type:"closeDialog"})}).catch(function(u){In(u)?(Z(u),C({type:"closeDialog"})):Nn(u)?(Y.current=!1,w.current?(w.current.value=null,w.current.click()):R(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):R(u)});return}w.current&&(C({type:"openDialog"}),de(),w.current.value=null,w.current.click())},[C,de,Z,$e,q,R,Ne,s]),Ge=m.useCallback(function(l){!x.current||!x.current.isEqualNode(l.target)||(l.key===" "||l.key==="Enter"||l.keyCode===32||l.keyCode===13)&&(l.preventDefault(),O())},[x,O]),Ze=m.useCallback(function(){C({type:"focus"})},[]),Ye=m.useCallback(function(){C({type:"blur"})},[]),qe=m.useCallback(function(){Be||(On()?setTimeout(O,0):O())},[Be,O]),$=function(u){return n?null:u},me=function(u){return fe?null:$(u)},J=function(u){return Ie?null:$(u)},X=function(u){P&&u.stopPropagation()},Mt=m.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=l.refKey,v=u===void 0?"ref":u,b=l.role,D=l.onKeyDown,V=l.onFocus,L=l.onBlur,he=l.onClick,ye=l.onDragEnter,ve=l.onDragOver,ee=l.onDragLeave,be=l.onDrop,xe=se(l,Wn);return y(y(Re({onKeyDown:me(j(D,Ge)),onFocus:me(j(V,Ze)),onBlur:me(j(L,Ye)),onClick:$(j(he,qe)),onDragEnter:J(j(ye,Ve)),onDragOver:J(j(ve,Ke)),onDragLeave:J(j(ee,Ue)),onDrop:J(j(be,Q)),role:typeof b=="string"&&b!==""?b:"presentation"},v,x),!n&&!fe?{tabIndex:0}:{}),xe)}},[x,Ge,Ze,Ye,qe,Ve,Ke,Ue,Q,fe,Ie,n]),Wt=m.useCallback(function(l){l.stopPropagation()},[]),Ht=m.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=l.refKey,v=u===void 0?"ref":u,b=l.onChange,D=l.onClick,V=se(l,Hn),L=Re({accept:H,multiple:s,type:"file",style:{display:"none"},onChange:$(j(b,Q)),onClick:$(j(D,Wt)),tabIndex:-1},v,w);return y(y({},L),V)}},[w,r,s,Q,n]);return y(y({},ge),{},{isFocused:zt&&!n,getRootProps:Mt,getInputProps:Ht,rootRef:x,inputRef:w,open:$(O)})}function Jn(e,t){switch(t.type){case"focus":return y(y({},e),{},{isFocused:!0});case"blur":return y(y({},e),{},{isFocused:!1});case"openDialog":return y(y({},Fe),{},{isFileDialogActive:!0});case"closeDialog":return y(y({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return y(y({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return y(y({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return y({},Fe);default:return e}}function ut(){}const Xn=/^(\w*) .*$/,eo=/^Base Hit%: .*$/,to=/^(?:.*) (?:hacks|fails to hack) (?:.*)$/,ro=/^(?:.*) repels hacking attempt$/,no=/^(.*) (?:blasted off|knocked off|severed)$/,oo=/^(?:.*) system corrupted$/,ao=/^(.*) destroyed$/,ft=/^(.*) melted|(.*) instant meltdown$/,io=/^Suffered critical hit: Meltdown \(\+(?:.*)\)$/,so=/^(.*) (overflow dmg|damaged): (\d*)(?: \(Crit: (.*)\))?$/,co=/^Damage insufficient to overcome (?:.*)$/,lo=/^(?:.*) disabled \(Disruption\)$/,uo=/^(.*) detonated$/,fo=/^Intercepted by (?:.*)$/,po=/^Gunslinging -> (?:.*)$/,go=/^(\d*)_( *)(.*?)(?: <x(\d*|\*)>)?$/,mo=/^(?:.*) (?:breached|damaged|disabled)$/,ho=/^(.*) explodes$/,yo=/^(?:.* penetrates .*)|(?:Penetrated by .*)$/,vo=/^(?:.*) prevented disruption$/,bo=/^(?:.*) prevented critical effect$/,xo=/^(.*) destroyed(?: \(Crit: (.*)\))?$/,Co=/^(?:.*) short circuited$/,Do=/^(?:.*) triggered(?: by (?:.*))?$/,Eo=/^\?\?\?$/,wo=/^(?:([^:]*): )?(.*?) (sneak attack )?\((?:[^=)]*=)?(\d+)%\) (?:(\d*)\/(\d*) )?(\w*)$/,To=/^\w{2}-\w{3}\((\w)\)$/,jo=new Map([["u","Artisan"],["T","Borebot"],["Y","Bouncer"],["l","Butcher (5)"],["O","Cobbler"],["k","Decomposer"],["q","Demented"],["D","Dragon"],["E","Elite (4)"],["i","Fireman (5)"],["F","Furnace"],["h","Guerrilla (5)"],["H","Hydra"],["x","Infiltrator (6)"],["K","Knight"],["B","Marauder (6)"],["d","Martyr (5)"],["M","Mutant (5)"],["r","Packrat"],["t","Parasite"],["S","Samaritan"],["b","Savage (5)"],["j","Scrapper (3)"],["R","Subdweller"],["m","Surgeon (4)"],["f","Thief"],["g","Thug (5)"],["c","Tinkerer"],["c","Scientist"],["L","Troll"],["s","Wasp (5)"],["p","Wizard (5)"],["A","Z-Courier"],["Z","Z-Heavy (5)"],["o","Z-Technician"],["z","Zionite"]]),Ao=/^P(\w)-\w{10}$/,ko=[{name:"Assembled (4)",regex:/^as-\d+$/},{name:"Assembler",regex:/^AS-\d+$/},{name:"Golem",regex:/^AG-\d+$/},{name:"Lugger",regex:/^Lugger \d{3}$/},{name:"Q-Series",regex:/^Q\d{3}-\w$/},{name:"Scrapoid (3)",regex:/^\w{5}-D/},{name:"Scraphulk (6)",regex:/^\w{5}-K/},{name:"Warlord (Command)",regex:/^ZY-L1N$/},{name:"Z-Experimental (8)",regex:/^Z-Ex$/},{name:"Z-Imprinter",regex:/^Z-Im$/}];class So{constructor(t){this.ignoredRegexes=[eo,oo,to,ro,ft,io,no,co,lo,po,fo,mo,yo,vo,bo,Co,Do],this.currentEntry=pt(),this.lines=t,this.lineIndex=0,this.entries=[]}parseAllLogEntries(){let t;for(;(t=this.getNextLine())&&t!==null;)this.parseLogEntry(t)}getNextLine(){const t=this.peekNextLine();return t!==null&&(this.lineIndex+=1),t}parseDamageEntry(t){const r=so.exec(t.remainingText);if(r===null)return!1;const n=r[1],a=B(r[3],0),o=r[2]==="overflow dmg",i=r[4]??void 0,s=ne();if(dt(n))return!0;if(Ee(n)||n.toLowerCase()==="core")s.damagedEntity="Cogmind",s.damagedPart=n.toLowerCase()==="core"?"Core":n;else if(n.endsWith("+")&&Ee(n.slice(0,n.length-1)))s.damagedEntity="Cogmind",s.damagedPart=n.slice(0,n.length-1);else{const{botName:c,partName:d}=Te(n);s.damagedEntity=c,s.damagedPart=d}s.damageOverflow=o,s.damageDealt=a,s.criticalHitType=i,this.currentEntry.damageEntries.push(s);const p=this.peekNextLine();if(p!==null&&p.indent>=t.indent){const c=ao.exec(p.remainingText),d=ft.exec(p.remainingText);if(c!==null||d!==null)if(s.damagedPart==="Core")this.getNextLine(),s.targetDestroyed=!0;else if(d!==null){this.getNextLine();const g=ne();g.damagedEntity=s.damagedEntity,g.damagedPart="Core",g.targetDestroyed=!0,this.currentEntry.damageEntries.push(g)}else this.parseDestroyedTarget(this.getNextLine())}return!0}parseDestroyedTarget(t){const r=xo.exec(t.remainingText);if(r===null)return!1;const n=r[1],a=r[2],o=ne();if(dt(n))return!0;let i,s;return Ee(n)?(i="Cogmind",s=n):{botName:i,partName:s}=Te(n),o.damagedEntity=i,o.damagedPart=s,o.criticalHitType=a,o.targetDestroyed=!0,this.currentEntry.damageEntries.push(o),!0}parseEngineDetonated(t){const r=uo.exec(t.remainingText);if(r===null)return!1;const{botName:n,partName:a}=Te(r[1]),o=ne();return o.damagedEntity=n,o.damagedPart=a,o.targetDestroyed=!0,this.currentEntry.damageEntries.push(o),!0}parseIgnoredLine(t){for(const r of this.ignoredRegexes)if(r.exec(t.remainingText)!==null)return!0;return!1}parseLogEntry(t){this.currentEntry=pt();const r=this.currentEntry;if(r.turn=t.turn,!this.parseWeaponAttack(t)&&!this.parseMachineExplosion(t)){if(this.parseDamageEntry(t)||this.parseDestroyedTarget(t)){r.projectilesHit=1,r.projectilesTotal=1,this.entries.push(r);return}this.parseIgnoredLine(t)||t.remainingText.length>0&&console.log(`Skipped non-recognized text ${t.remainingText}`)}}parseMachineExplosion(t){const r=ho.exec(t.remainingText);if(r===null)return!1;const n=this.currentEntry;return n.sourceEntity=r[1],n.sourceWeapon="Explosion",this.parseNestedLines(t),this.entries.push(n),!0}parseNestedLines(t){let r;for(;(r=this.peekNextLine())&&r!==null&&r.indent>t.indent;){const n=this.getNextLine();if(!this.parseDamageEntry(n)){if(this.parseDestroyedTarget(n))continue;if(this.parseEngineDetonated(n))continue;if(this.parseMachineExplosion(n))continue;if(this.parseWeaponAttack(n))continue;if(this.parseIgnoredLine(n))continue;console.log(`Skipped non-recognized nested text ${n.remainingText}`)}}}parseWeaponAttack(t){const r=this.currentEntry,n=wo.exec(t.remainingText);if(n===null){if(Eo.exec(t.remainingText)===null)return!1;r.sourceEntity="Unknown",r.sourceWeapon="Unknown",r.projectilesHit=1,r.projectilesTotal=1}else{if(n[1]!==void 0){const a=It(n[1]);r.sourceEntity=a===void 0?"Unknown":a.Name}else r.sourceEntity="Cogmind";r.sourceWeapon=n[2],n[3]!==void 0&&(r.sneakAttack=!0),r.weaponAccuracy=B(n[4],0),n[5]!==void 0&&n[6]!==void 0?(r.projectilesHit=B(n[5],0),r.projectilesTotal=B(n[6],0)):(r.projectilesHit=n[7]==="Hit"?1:0,r.projectilesTotal=1)}return this.parseNestedLines(t),this.entries.push(r),!0}peekNextLine(){return this.lineIndex<this.lines.length?this.lines[this.lineIndex]:null}}function ne(){return{damagedEntity:"",damagedPart:"",criticalHitType:void 0,damageDealt:void 0,damageOverflow:!1,targetDestroyed:!1}}function pt(){return{damageEntries:[],projectilesHit:0,projectilesTotal:0,sourceEntity:"Unknown",sourceWeapon:"Unknown",weaponAccuracy:void 0,sneakAttack:!1,turn:0}}const Po=new Set(["Door","Earth","Reinforced Barrier","Wall"]);function dt(e){return e.endsWith("Trap")?!0:Po.has(e)}function Ro(e){const t=[],r=e.split(`
`);for(let a=0;a<r.length;a++){let o=r[a].trim();a+1<r.length&&r[a+1].startsWith(" ")&&(o+=" "+r[a+1].trim(),a+=1);const i=go.exec(o);if(i===null){if(t.length>0&&o.length>0){t[t.length-1].remainingText+=" "+o;continue}o.length>0&&!o.includes("Cogmind Combat Log")&&console.log(`Failed to parse log line ${o}`);continue}const s=B(i[1],0),p=i[2].length,c=i[3],d=i[4]===void 0?1:B(i[4],1);for(let g=0;g<d;g++)t.push({indent:p,remainingText:c,turn:s})}const n=new So(t);return n.parseAllLogEntries(),n.entries}function Te(e){const t=e.split(" ");for(let r=1;r<t.length+1;r++){const n=It(t.slice(0,r).join(" "));if(n!==void 0){let a=t.slice(r).join(" ");return(a==="core"||a==="")&&(a="Core"),a.endsWith("+")&&(a=a.slice(0,a.length-1)),{botName:n.Name,partName:a}}}for(let r=1;r<t.length;r++){let n=t.slice(r).join(" ");if(n.endsWith("+")&&(n=n.slice(0,n.length-1)),gr(n)!==void 0||n==="core"||n==="Core"){const o=t.slice(0,r).join(" ");return n==="core"&&(n="Core"),{botName:o,partName:n}}}return console.log(`Failed to split bot and part ${e}`),{botName:"Unknown",partName:"Unknown"}}function It(e){let t=kr(e);if(t!==void 0||(t=te(e),t!==void 0))return t;const r=Xn.exec(e);if(r!==null&&(t=Ar(r[1]),t!==void 0))return t;const n=To.exec(e);if(n!==null){const o=jo.get(n[1]);if(o===void 0){console.log(`Unexpected derelict class ${n[1]}`);return}else return t=te(o),t===void 0&&console.log(`Bad derelict name ${o}`),t}const a=Ao.exec(e);if(a!==null){const o=`Protovariant ${a[1]}`;return t=te(o),t===void 0&&console.log(`Bad protovariant name ${o}`),t}for(const o of ko)if(o.regex.exec(e)!==null)return t=te(o.name),t===void 0&&console.log(`Bad special bot name ${o.name}`),t}function Fo({onParse:e}){const t=s=>{let p=[];for(const c of s){const d=new FileReader;d.onload=()=>{const g=d.result;g!==null&&(p=[...p,...Ro(g)],e(p))},d.readAsText(c)}},{getRootProps:r,getInputProps:n,open:a,isDragActive:o}=Bt({noClick:!0,onDrop:t}),i=`dropzone-container${o?" dropzone-container-drag-active":""}`;return f.jsxs("div",{className:i,...r(),children:[f.jsx("input",{...n()}),f.jsx("span",{children:"Drag file or browse to upload combat log"}),f.jsx(Gt,{tooltipText:"Browse for combat log files.",children:f.jsx("div",{children:f.jsx(je,{onClick:a,children:"Browse for file"})})}),f.jsx(Zt,{tooltipText:'Combat logs can be exported by setting "combatLogOutput=1" in the advanced settings and setting "combatLogLimit=0". The second setting is needed to prevent the combat log truncating at 1000 lines. The standard Cogmind Options menu setting "Log Output" must also be set to "Text". Advanced settings and combat logs are both located in your standard Cogmind install location. For Steam users, this is typically C:/Program Files (x86)/Steam/steamapps/common/Cogmind/. Combat log scoresheets are in /scores/ and end in _combat.txt.',children:"Help"})]})}const _o=[{label:"Bar",value:"Bar",tooltip:'Sets charts to display as horizontal bar charts. Only the top 10 categories are shown by default, but an "Other" category can be expanded to show the full list of options.'},{label:"Pie",value:"Pie",tooltip:"Sets charts to display as pie charts. Only the top 10 categories are shown in a pie chart."}],Oo=[{label:"Bot",value:"Bot",tooltip:"Groups chart values based on damage dealt to individual bot types."},{label:"Class",value:"Class",tooltip:"Groups chart values based on damage dealt to bot class types."},{label:"Critical",value:"Critical",tooltip:"Groups chart values based on critical hit type (or None)."},{label:"Damage Type",value:"Damage Type",tooltip:"Groups chart values based on the damage type of the weapon used."},{label:"Damaged Part",value:"Part",tooltip:"Groups chart values based on the damaged part."},{label:"Damaged Slot",value:"Slot",tooltip:"Groups chart values based on the damaged slot. Core is considered its own slot."},{label:"Used Weapon",value:"Weapon",tooltip:"Groups chart values based on the weapon used."}];function $o(e,t){return f.jsxs(dr,{children:[f.jsx(Nr,{combatLogEntries:e,displayOptions:t}),f.jsx(Wr,{combatLogEntries:e,displayOptions:t}),f.jsx(Gr,{combatLogEntries:e,displayOptions:t}),f.jsx(qr,{combatLogEntries:e,displayOptions:t}),f.jsx(Xr,{combatLogEntries:e,displayOptions:t}),f.jsx(Pr,{combatLogEntries:e,displayOptions:t}),f.jsx(_r,{combatLogEntries:e,displayOptions:t}),f.jsx(Lr,{combatLogEntries:e,displayOptions:t}),f.jsx(Er,{combatLogEntries:e,displayOptions:t}),f.jsx(Kr,{combatLogEntries:e,displayOptions:t}),f.jsx(rn,{combatLogEntries:e,displayOptions:t})]})}function Mo(){const r=[],[n,a]=Yt(),[o,i]=m.useState(!1),[s,p]=m.useState(r),c=o?$o(s,n):null;return f.jsxs("div",{className:"page-content",children:[f.jsx(Fo,{onParse:d=>{p(d),i(!0)}}),!1,o&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"page-input-group",children:[f.jsx(Qe,{label:"Chart Type",tooltip:"Sets the display type of all charts.",flexGrowButtonCount:!0,buttons:_o,selected:n.chartType,onValueChanged:d=>{const g={...n,chartType:d};a(g)}}),f.jsx(Qe,{label:"Chart Category",tooltip:"Sets the category type for all charts. This determines how the combat log is split into pieces.",flexGrowButtonCount:!0,buttons:Oo,selected:n.category,onValueChanged:d=>{const g={...n,category:d};a(g)}})]}),c]})]})}export{Mo as default};
