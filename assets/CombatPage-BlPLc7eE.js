import{t as Kt,j as d,r as m,v as gt,B as ke,q as U,R as Zt,f as B,T as qt,w as Yt,x as Qt,d as Qe}from"./index-DEE0P6Bj.js";import{j as Jt}from"./items-RjbLE1iR.js";import{B as Xt,c as mt,a as I,b as er,d as ht,e as yt,C as vt,f as tr,g as rr,p as bt,L as nr,h as xt,i as Ct,P as or,A as ar,j as ir,k as sr,l as cr,m as lr}from"./chartColors-Cw20gT1d.js";import{j as _e}from"./bots-BsBiS4QJ.js";/* empty css              */var wt={exports:{}},ur="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fr=ur,pr=fr;function Dt(){}function Et(){}Et.resetWarningCache=Dt;var dr=function(){function e(n,a,o,i,s,u){if(u!==pr){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Et,resetWarningCache:Dt};return r.PropTypes=r,r};wt.exports=dr();var gr=wt.exports;const h=Kt(gr);function mr({children:e}){return d.jsx("div",{className:"chart-grid",children:e})}const ce=new Map(Jt.map(e=>[e.Name,e]));function De(e){return ce.get(e)!==void 0}function Tt(e){return ce.get(e)}function oe(e){const t=ce.get(e);return t===void 0?(console.log(`Failed to find item ${e}`),"Unknown"):t["Damage Type"]===void 0?t["Explosion Type"]===void 0?(console.log(`Item ${e} didn't have any damage type`),"Unknown"):t["Explosion Type"]:t["Damage Type"]}function Je(e){const t=ce.get(e);return e==="Core"?"Core":t===void 0?(console.log(`Failed to find item ${e}`),"Unknown"):(t.Slot===void 0&&console.log(`Item ${e} didn't have any slot`),t.Slot)}function kt(){const[e,t]=m.useState({width:0,height:0});return m.useLayoutEffect(()=>{function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),e}vt.register(tr,rr,bt,nr,xt,Ct);function hr({chartTitle:e,values:t,barColors:r,maxValue:n,valuesArePercentages:a}){const o=kt(),i=gt();return d.jsx(Xt,{data:yr(e,t,r),options:vr(e,n,i,o,a||!1),plugins:[mt]})}function yr(e,t,r){return{labels:t.map(n=>n.label),datasets:[{label:e,data:t.map(n=>n.value),backgroundColor:r,borderColor:r}]}}function vr(e,t,r,n,a){return{animation:{duration:300},color:I,indexAxis:"y",interaction:{axis:"y",intersect:!1},maintainAspectRatio:!1,plugins:{chartCanvasBackgroundColor:{color:r==="Cogmind"?ht:yt},legend:{display:!1},tooltip:{callbacks:{label:o=>{if(a){const i=Number(o.formattedValue.replace(",","")).toFixed(1);return`${e}: ${i}%`}else{const i=Number(o.formattedValue.replace(",","")),s=o.chart.data.datasets[0].data.map(c=>Number(c)).reduce((c,f)=>c+f,0),u=(i*100/s).toFixed(1);return`${e}: ${i} (${u}%) `}}}},title:{color:I,font:{size:Math.min(20,n.width/22)},display:!0,text:e}},scales:{x:{border:{display:!1},grid:{color:er},max:t,ticks:{color:I,precision:0,callback(o,i,s){return a?o+"%":o}}},y:{border:{display:!1},grid:{display:!1},ticks:{color:I}}}}}vt.register(ar,Ct,bt,xt);function br({chartTitle:e,values:t,backgroundColors:r,borderColors:n}){const a=kt(),o=gt();return d.jsx(or,{data:xr(e,t,r,n),options:Cr(e,o,a),plugins:[mt]})}function xr(e,t,r,n){return{labels:t.map(a=>a.label),datasets:[{label:e,data:t.map(a=>a.value),backgroundColor:r,borderColor:n}]}}function Cr(e,t,r){return{animation:{duration:300},color:I,maintainAspectRatio:!1,plugins:{chartCanvasBackgroundColor:{color:t==="Cogmind"?ht:yt},title:{color:I,display:!0,font:{size:Math.min(20,r.width/22)},text:e},tooltip:{callbacks:{label:n=>{const a=Number(n.formattedValue.replace(",","")),o=n.chart.data.datasets[0].data.map(s=>Number(s)).reduce((s,u)=>s+u,0),i=(a*100/o).toFixed(1);return`${e}: ${a} (${i}%) `}}}}}}function T({chartTitle:e,values:t,displayOptions:r,forceChartType:n,valuesArePercentages:a}){const[o,i]=m.useState(!1),[s,u]=m.useState(!0);let c=!1;t=[...t],t.sort((g,D)=>s?D.value-g.value:g.value-D.value);const f=t.length>10;if(!o&&f){const g=t.splice(0,10);a||(g.push({label:"Other",value:t.reduce((D,S)=>D+S.value,0)}),c=!0),t=g}return r.chartType==="Pie"&&n!=="Bar"?Dr(e,t):wr(t,e,c,f,i,o,u,s,a||!1)}function wr(e,t,r,n,a,o,i,s,u){let c;r&&(!s||s&&e[10].value>1.2*e[0].value)&&(c=Math.floor(1.2*(s?e[0].value:e[9].value)));const f=d.jsx("div",{className:"horizontal-bar-chart-wrapper",style:{height:`${75+e.length*20}px`},children:d.jsx(hr,{chartTitle:t,values:e,barColors:r?cr:lr,maxValue:c,valuesArePercentages:u})});let g;n&&(g=d.jsx(ke,{onClick:()=>a(A=>!A),className:"button-expand-collapse",tooltip:o?'Click to collapse back to top 10 values and "Other" category':'Click to expand "Other" category into all values',children:o?"▲ Collapse ▲":"▼ Show All ▼"}));const D=d.jsx(ke,{onClick:()=>i(A=>!A),className:"button-ascending-descending",tooltip:s?"Click to change sort order to descending":"Click to change sort order to ascending",children:s?"Sort ↓":"Sort ↑"});return d.jsxs("div",{className:"horizontal-bar-chart-container",children:[D,f,g]})}function Dr(e,t){return d.jsx("div",{className:"pie-chart-container",children:d.jsx(br,{chartTitle:e,values:t,borderColors:sr,backgroundColors:ir})})}function Er({combatLogEntries:e,displayOptions:t}){t={...t,chartType:"Bar"};const r=Tr(e,t);return d.jsx(T,{chartTitle:"Cogmind's Accuracy",values:r,displayOptions:t,valuesArePercentages:!0})}function Tr(e,t){switch(t.category){case"Bot":case"Class":case"Critical":case"Part":case"Slot":return[]}const r=new Map;for(const a of e){if(a.sourceEntity!=="Cogmind")continue;let o;switch(t.category){case"Damage Type":o=oe(a.sourceWeapon);break;case"Weapon":o=a.sourceWeapon;break;default:U(t.category)}let i=r.get(o);i===void 0&&(i={hits:0,total:0}),i.hits+=a.projectilesHit,i.total+=a.projectilesTotal,r.set(o,i)}const n=[];for(const[a,o]of r)n.push({label:a,value:o.hits/o.total*100});return n}const At=new Map(_e.map(e=>[e.Name,e])),kr=new Map(_e.filter(e=>e["Short Name"]!==void 0).map(e=>[e["Short Name"],e])),Ar=new Map(_e.filter(e=>e["Ally Name"]!==void 0).map(e=>[e["Ally Name"],e]));function jr(e){return Ar.get(e)}function te(e){return At.get(e)}function Sr(e){return kr.get(e)}function Ae(e){const t=At.get(e);return t===void 0?(console.log(`Failed to find bot ${e}`),"Unknown"):t.Class}function Pr(e,t,r,n){switch(n){case"Source":switch(r){case"Bot":return e.sourceEntity;case"Class":return Ae(e.sourceEntity);case"Critical":return t.criticalHitType||"None";case"Damage Type":return oe(e.sourceWeapon);case"Part":return t.damagedPart;case"Slot":return Je(t.damagedPart);case"Weapon":return e.sourceWeapon;default:U(r)}break;case"Target":switch(r){case"Bot":return t.damagedEntity;case"Class":return Ae(t.damagedEntity);case"Critical":return t.criticalHitType||"None";case"Damage Type":return oe(e.sourceWeapon);case"Part":return t.damagedPart;case"Slot":return Je(t.damagedPart);case"Weapon":return e.sourceWeapon;default:U(r);break}break;default:U(n)}return"Unknown"}function j(e,t,r,n){const a=new Map;for(const i of e)if(!(r.processCombatLogEntry!==void 0&&!r.processCombatLogEntry(i)))for(const s of i.damageEntries){if(r.processDamageEntry!==void 0&&!r.processDamageEntry(s))continue;const u=Pr(i,s,t,n);let c=a.get(u);c===void 0&&(c=0),c+=r.getValue(i,s),a.set(u,c)}const o=[];for(const[i,s]of a)o.push({label:i,value:s});return o}function Rr({combatLogEntries:e,displayOptions:t}){const r=_r(e,t);return d.jsx(T,{chartTitle:"Cogmind's Parts Destroyed",values:r,displayOptions:t})}const Fr={processDamageEntry:e=>e.damagedPart!=="Core"&&e.targetDestroyed===!0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>1};function _r(e,t){return j(e,t.category,Fr,"Target")}function $r({combatLogEntries:e,displayOptions:t}){const r=Lr(e,t);return d.jsx(T,{chartTitle:"Critical Hits by Cogmind",values:r,displayOptions:t})}const Or={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.criticalHitType!==void 0,getValue:(e,t)=>1};function Lr(e,t){return j(e,t.category,Or,"Target")}function Br({combatLogEntries:e,displayOptions:t}){const r=Nr(e,t);return d.jsx(T,{chartTitle:"Critical Hits to Cogmind",values:r,displayOptions:t})}const Ir={processCombatLogEntry:e=>e.sourceEntity!=="Cogmind",processDamageEntry:e=>e.criticalHitType!==void 0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>1};function Nr(e,t){return j(e,t.category,Ir,"Source")}function Wr({combatLogEntries:e,displayOptions:t}){const r=Mr(e,t);return d.jsx(T,{chartTitle:"Damage Dealt",values:r,displayOptions:t})}const zr={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damageDealt!==void 0,getValue:(e,t)=>t.damageDealt};function Mr(e,t){return j(e,t.category,zr,"Target")}function Hr({combatLogEntries:e,displayOptions:t}){const r=Ur(e,t);return d.jsx(T,{chartTitle:"Damage Received",values:r,displayOptions:t})}const Vr={processDamageEntry:e=>e.damageDealt!==void 0&&e.damagedEntity==="Cogmind",getValue:(e,t)=>t.damageDealt};function Ur(e,t){return j(e,t.category,Vr,"Source")}function Gr({combatLogEntries:e,displayOptions:t}){t={...t,chartType:"Bar"};const r=Kr(e,t);return d.jsx(T,{chartTitle:"Non-Cogmind Accuracy",values:r,displayOptions:t,valuesArePercentages:!0})}function Kr(e,t){switch(t.category){case"Critical":case"Part":case"Slot":return[]}const r=new Map;for(const a of e){if(a.sourceEntity==="Cogmind")continue;let o;switch(t.category){case"Bot":o=a.sourceEntity;break;case"Class":o=Ae(a.sourceEntity);break;case"Damage Type":o=oe(a.sourceWeapon);break;case"Weapon":o=a.sourceWeapon;break;default:U(t.category)}let i=r.get(o);i===void 0&&(i={hits:0,total:0}),i.hits+=a.projectilesHit,i.total+=a.projectilesTotal,r.set(o,i)}const n=[];for(const[a,o]of r)n.push({label:a,value:o.hits/o.total*100});return n}function Zr({combatLogEntries:e,displayOptions:t}){const r=Yr(e,t);return d.jsx(T,{chartTitle:"Overflow Damage Dealt",values:r,displayOptions:t})}const qr={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damageDealt!==void 0&&e.damageOverflow===!0,getValue:(e,t)=>t.damageDealt};function Yr(e,t){return j(e,t.category,qr,"Target")}function Qr({combatLogEntries:e,displayOptions:t}){const r=Xr(e,t);return d.jsx(T,{chartTitle:"Overflow Damage Received",values:r,displayOptions:t})}const Jr={processDamageEntry:e=>e.damageDealt!==void 0&&e.damagedEntity==="Cogmind"&&e.damageOverflow===!0,getValue:(e,t)=>t.damageDealt};function Xr(e,t){return j(e,t.category,Jr,"Source")}function en({combatLogEntries:e,displayOptions:t}){const r=rn(e,t);return d.jsx(T,{chartTitle:"Parts Destroyed by Cogmind",values:r,displayOptions:t})}const tn={processCombatLogEntry:e=>e.sourceEntity==="Cogmind",processDamageEntry:e=>e.damagedPart!=="Core"&&e.targetDestroyed===!0,getValue:(e,t)=>1};function rn(e,t){return j(e,t.category,tn,"Target")}function nn({combatLogEntries:e,displayOptions:t}){const r=an(e,t);return d.jsx(T,{chartTitle:"Sneak Attacks by Cogmind",values:r,displayOptions:t})}const on={processCombatLogEntry:e=>e.sourceEntity==="Cogmind"&&e.sneakAttack===!0,getValue:(e,t)=>1};function an(e,t){return j(e,t.category,on,"Target")}function N(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(f){try{c(n.next(f))}catch(g){i(g)}}function u(f){try{c(n.throw(f))}catch(g){i(g)}}function c(f){f.done?o(f.value):a(f.value).then(s,u)}c((n=n.apply(e,t||[])).next())})}function W(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(f){return u([c,f])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(o=c[0]&2?a.return:c[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,c[1])).done)return o;switch(a=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],a=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Xe(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,o=[],i;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(s){i={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function et(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var sn=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function K(e,t){var r=cn(e);if(typeof r.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function cn(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var n=t.split(".").pop().toLowerCase(),a=sn.get(n);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}var ln=[".DS_Store","Thumbs.db"];function un(e){return N(this,void 0,void 0,function(){return W(this,function(t){return ae(e)&&fn(e.dataTransfer)?[2,mn(e.dataTransfer,e.type)]:pn(e)?[2,dn(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,gn(e)]:[2,[]]})})}function fn(e){return ae(e)}function pn(e){return ae(e)&&ae(e.target)}function ae(e){return typeof e=="object"&&e!==null}function dn(e){return je(e.target.files).map(function(t){return K(t)})}function gn(e){return N(this,void 0,void 0,function(){var t;return W(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(n){return K(n)})]}})})}function mn(e,t){return N(this,void 0,void 0,function(){var r,n;return W(this,function(a){switch(a.label){case 0:return e.items?(r=je(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(hn))]):[3,2];case 1:return n=a.sent(),[2,tt(jt(n))];case 2:return[2,tt(je(e.files).map(function(o){return K(o)}))]}})})}function tt(e){return e.filter(function(t){return ln.indexOf(t.name)===-1})}function je(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n)}return t}function hn(e){if(typeof e.webkitGetAsEntry!="function")return rt(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?St(t):rt(e)}function jt(e){return e.reduce(function(t,r){return et(et([],Xe(t),!1),Xe(Array.isArray(r)?jt(r):[r]),!1)},[])}function rt(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=K(t);return Promise.resolve(r)}function yn(e){return N(this,void 0,void 0,function(){return W(this,function(t){return[2,e.isDirectory?St(e):vn(e)]})})}function St(e){var t=e.createReader();return new Promise(function(r,n){var a=[];function o(){var i=this;t.readEntries(function(s){return N(i,void 0,void 0,function(){var u,c,f;return W(this,function(g){switch(g.label){case 0:if(s.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return u=g.sent(),r(u),[3,4];case 3:return c=g.sent(),n(c),[3,4];case 4:return[3,6];case 5:f=Promise.all(s.map(yn)),a.push(f),o(),g.label=6;case 6:return[2]}})})},function(s){n(s)})}o()})}function vn(e){return N(this,void 0,void 0,function(){return W(this,function(t){return[2,new Promise(function(r,n){e.file(function(a){var o=K(a,e.fullPath);r(o)},function(a){n(a)})})]})})}var bn=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return r.some(function(i){var s=i.trim().toLowerCase();return s.charAt(0)==="."?n.toLowerCase().endsWith(s):s.endsWith("/*")?o===s.replace(/\/.*$/,""):a===s})}return!0};function nt(e){return wn(e)||Cn(e)||Rt(e)||xn()}function xn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wn(e){if(Array.isArray(e))return Se(e)}function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ot(Object(r),!0).forEach(function(n){Pt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e,t){return Tn(e)||En(e,t)||Rt(e,t)||Dn()}function Dn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rt(e,t){if(e){if(typeof e=="string")return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}}function Se(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function En(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,o=!1,i,s;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(n.push(i.value),!(t&&n.length===t));a=!0);}catch(u){o=!0,s=u}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}return n}}function Tn(e){if(Array.isArray(e))return e}var kn="file-invalid-type",An="file-too-large",jn="file-too-small",Sn="too-many-files",Pn=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var r=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:kn,message:"File type must be ".concat(r)}},it=function(t){return{code:An,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},st=function(t){return{code:jn,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Rn={code:Sn,message:"Too many files"};function Ft(e,t){var r=e.type==="application/x-moz-file"||bn(e,t);return[r,r?null:Pn(t)]}function _t(e,t,r){if(F(e.size))if(F(t)&&F(r)){if(e.size>r)return[!1,it(r)];if(e.size<t)return[!1,st(t)]}else{if(F(t)&&e.size<t)return[!1,st(t)];if(F(r)&&e.size>r)return[!1,it(r)]}return[!0,null]}function F(e){return e!=null}function Fn(e){var t=e.files,r=e.accept,n=e.minSize,a=e.maxSize,o=e.multiple,i=e.maxFiles,s=e.validator;return!o&&t.length>1||o&&i>=1&&t.length>i?!1:t.every(function(u){var c=Ft(u,r),f=G(c,1),g=f[0],D=_t(u,n,a),S=G(D,1),A=S[0],z=s?s(u):null;return g&&A&&!z})}function ie(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function re(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function ct(e){e.preventDefault()}function _n(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function $n(e){return e.indexOf("Edge/")!==-1}function On(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return _n(e)||$n(e)}function k(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return t.some(function(s){return!ie(n)&&s&&s.apply(void 0,[n].concat(o)),ie(n)})}}function Ln(){return"showOpenFilePicker"in window}function Bn(e){if(F(e)){var t=Object.entries(e).filter(function(r){var n=G(r,2),a=n[0],o=n[1],i=!0;return $t(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(o)||!o.every(Ot))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(r,n){var a=G(n,2),o=a[0],i=a[1];return at(at({},r),{},Pt({},o,i))},{});return[{description:"Files",accept:t}]}return e}function In(e){if(F(e))return Object.entries(e).reduce(function(t,r){var n=G(r,2),a=n[0],o=n[1];return[].concat(nt(t),[a],nt(o))},[]).filter(function(t){return $t(t)||Ot(t)}).join(",")}function Nn(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Wn(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function $t(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Ot(e){return/^.*\.[\w]+$/.test(e)}var zn=["children"],Mn=["open"],Hn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Vn=["refKey","onChange","onClick"];function Un(e){return Zn(e)||Kn(e)||Lt(e)||Gn()}function Gn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zn(e){if(Array.isArray(e))return Pe(e)}function Ee(e,t){return Qn(e)||Yn(e,t)||Lt(e,t)||qn()}function qn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lt(e,t){if(e){if(typeof e=="string")return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,t)}}function Pe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yn(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,o=!1,i,s;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(n.push(i.value),!(t&&n.length===t));a=!0);}catch(u){o=!0,s=u}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}return n}}function Qn(e){if(Array.isArray(e))return e}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lt(Object(r),!0).forEach(function(n){Re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e,t){if(e==null)return{};var r=Jn(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jn(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var $e=m.forwardRef(function(e,t){var r=e.children,n=se(e,zn),a=It(n),o=a.open,i=se(a,Mn);return m.useImperativeHandle(t,function(){return{open:o}},[o]),Zt.createElement(m.Fragment,null,r(y(y({},i),{},{open:o})))});$e.displayName="Dropzone";var Bt={disabled:!1,getFilesFromEvent:un,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};$e.defaultProps=Bt;$e.propTypes={children:h.func,accept:h.objectOf(h.arrayOf(h.string)),multiple:h.bool,preventDropOnDocument:h.bool,noClick:h.bool,noKeyboard:h.bool,noDrag:h.bool,noDragEventsBubbling:h.bool,minSize:h.number,maxSize:h.number,maxFiles:h.number,disabled:h.bool,getFilesFromEvent:h.func,onFileDialogCancel:h.func,onFileDialogOpen:h.func,useFsAccessApi:h.bool,autoFocus:h.bool,onDragEnter:h.func,onDragLeave:h.func,onDragOver:h.func,onDrop:h.func,onDropAccepted:h.func,onDropRejected:h.func,onError:h.func,validator:h.func};var Fe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function It(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=y(y({},Bt),e),r=t.accept,n=t.disabled,a=t.getFilesFromEvent,o=t.maxSize,i=t.minSize,s=t.multiple,u=t.maxFiles,c=t.onDragEnter,f=t.onDragLeave,g=t.onDragOver,D=t.onDrop,S=t.onDropAccepted,A=t.onDropRejected,z=t.onFileDialogCancel,le=t.onFileDialogOpen,Oe=t.useFsAccessApi,Le=t.autoFocus,ue=t.preventDropOnDocument,Be=t.noClick,fe=t.noKeyboard,Ie=t.noDrag,P=t.noDragEventsBubbling,pe=t.onError,M=t.validator,H=m.useMemo(function(){return In(r)},[r]),Ne=m.useMemo(function(){return Bn(r)},[r]),de=m.useMemo(function(){return typeof le=="function"?le:ut},[le]),Z=m.useMemo(function(){return typeof z=="function"?z:ut},[z]),x=m.useRef(null),E=m.useRef(null),zt=m.useReducer(Xn,Fe),We=Ee(zt,2),ge=We[0],C=We[1],Mt=ge.isFocused,ze=ge.isFileDialogActive,q=m.useRef(typeof window<"u"&&window.isSecureContext&&Oe&&Ln()),Me=function(){!q.current&&ze&&setTimeout(function(){if(E.current){var p=E.current.files;p.length||(C({type:"closeDialog"}),Z())}},300)};m.useEffect(function(){return window.addEventListener("focus",Me,!1),function(){window.removeEventListener("focus",Me,!1)}},[E,ze,Z,q]);var _=m.useRef([]),He=function(p){x.current&&x.current.contains(p.target)||(p.preventDefault(),_.current=[])};m.useEffect(function(){return ue&&(document.addEventListener("dragover",ct,!1),document.addEventListener("drop",He,!1)),function(){ue&&(document.removeEventListener("dragover",ct),document.removeEventListener("drop",He))}},[x,ue]),m.useEffect(function(){return!n&&Le&&x.current&&x.current.focus(),function(){}},[x,Le,n]);var R=m.useCallback(function(l){pe?pe(l):console.error(l)},[pe]),Ve=m.useCallback(function(l){l.preventDefault(),l.persist(),X(l),_.current=[].concat(Un(_.current),[l.target]),re(l)&&Promise.resolve(a(l)).then(function(p){if(!(ie(l)&&!P)){var v=p.length,b=v>0&&Fn({files:p,accept:H,minSize:i,maxSize:o,multiple:s,maxFiles:u,validator:M}),w=v>0&&!b;C({isDragAccept:b,isDragReject:w,isDragActive:!0,type:"setDraggedFiles"}),c&&c(l)}}).catch(function(p){return R(p)})},[a,c,R,P,H,i,o,s,u,M]),Ue=m.useCallback(function(l){l.preventDefault(),l.persist(),X(l);var p=re(l);if(p&&l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}return p&&g&&g(l),!1},[g,P]),Ge=m.useCallback(function(l){l.preventDefault(),l.persist(),X(l);var p=_.current.filter(function(b){return x.current&&x.current.contains(b)}),v=p.indexOf(l.target);v!==-1&&p.splice(v,1),_.current=p,!(p.length>0)&&(C({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),re(l)&&f&&f(l))},[x,f,P]),Y=m.useCallback(function(l,p){var v=[],b=[];l.forEach(function(w){var V=Ft(w,H),L=Ee(V,2),he=L[0],ye=L[1],ve=_t(w,i,o),ee=Ee(ve,2),be=ee[0],xe=ee[1],Ce=M?M(w):null;if(he&&be&&!Ce)v.push(w);else{var we=[ye,xe];Ce&&(we=we.concat(Ce)),b.push({file:w,errors:we.filter(function(Gt){return Gt})})}}),(!s&&v.length>1||s&&u>=1&&v.length>u)&&(v.forEach(function(w){b.push({file:w,errors:[Rn]})}),v.splice(0)),C({acceptedFiles:v,fileRejections:b,type:"setFiles"}),D&&D(v,b,p),b.length>0&&A&&A(b,p),v.length>0&&S&&S(v,p)},[C,s,H,i,o,u,D,S,A,M]),Q=m.useCallback(function(l){l.preventDefault(),l.persist(),X(l),_.current=[],re(l)&&Promise.resolve(a(l)).then(function(p){ie(l)&&!P||Y(p,l)}).catch(function(p){return R(p)}),C({type:"reset"})},[a,Y,R,P]),$=m.useCallback(function(){if(q.current){C({type:"openDialog"}),de();var l={multiple:s,types:Ne};window.showOpenFilePicker(l).then(function(p){return a(p)}).then(function(p){Y(p,null),C({type:"closeDialog"})}).catch(function(p){Nn(p)?(Z(p),C({type:"closeDialog"})):Wn(p)?(q.current=!1,E.current?(E.current.value=null,E.current.click()):R(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):R(p)});return}E.current&&(C({type:"openDialog"}),de(),E.current.value=null,E.current.click())},[C,de,Z,Oe,Y,R,Ne,s]),Ke=m.useCallback(function(l){!x.current||!x.current.isEqualNode(l.target)||(l.key===" "||l.key==="Enter"||l.keyCode===32||l.keyCode===13)&&(l.preventDefault(),$())},[x,$]),Ze=m.useCallback(function(){C({type:"focus"})},[]),qe=m.useCallback(function(){C({type:"blur"})},[]),Ye=m.useCallback(function(){Be||(On()?setTimeout($,0):$())},[Be,$]),O=function(p){return n?null:p},me=function(p){return fe?null:O(p)},J=function(p){return Ie?null:O(p)},X=function(p){P&&p.stopPropagation()},Ht=m.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=l.refKey,v=p===void 0?"ref":p,b=l.role,w=l.onKeyDown,V=l.onFocus,L=l.onBlur,he=l.onClick,ye=l.onDragEnter,ve=l.onDragOver,ee=l.onDragLeave,be=l.onDrop,xe=se(l,Hn);return y(y(Re({onKeyDown:me(k(w,Ke)),onFocus:me(k(V,Ze)),onBlur:me(k(L,qe)),onClick:O(k(he,Ye)),onDragEnter:J(k(ye,Ve)),onDragOver:J(k(ve,Ue)),onDragLeave:J(k(ee,Ge)),onDrop:J(k(be,Q)),role:typeof b=="string"&&b!==""?b:"presentation"},v,x),!n&&!fe?{tabIndex:0}:{}),xe)}},[x,Ke,Ze,qe,Ye,Ve,Ue,Ge,Q,fe,Ie,n]),Vt=m.useCallback(function(l){l.stopPropagation()},[]),Ut=m.useMemo(function(){return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=l.refKey,v=p===void 0?"ref":p,b=l.onChange,w=l.onClick,V=se(l,Vn),L=Re({accept:H,multiple:s,type:"file",style:{display:"none"},onChange:O(k(b,Q)),onClick:O(k(w,Vt)),tabIndex:-1},v,E);return y(y({},L),V)}},[E,r,s,Q,n]);return y(y({},ge),{},{isFocused:Mt&&!n,getRootProps:Ht,getInputProps:Ut,rootRef:x,inputRef:E,open:O($)})}function Xn(e,t){switch(t.type){case"focus":return y(y({},e),{},{isFocused:!0});case"blur":return y(y({},e),{},{isFocused:!1});case"openDialog":return y(y({},Fe),{},{isFileDialogActive:!0});case"closeDialog":return y(y({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return y(y({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return y(y({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return y({},Fe);default:return e}}function ut(){}const eo=/^(\w*) .*$/,to=/^Base Hit%: .*$/,ro=/^(?:.*) (?:hacks|fails to hack) (?:.*)$/,no=/^(?:.*) repels hacking attempt$/,oo=/^(.*) (?:blasted off|knocked off|severed)$/,ao=/^(?:.*) system corrupted$/,io=/^(.*) destroyed$/,ft=/^(.*) melted|(.*) instant meltdown$/,so=/^Suffered critical hit: Meltdown \(\+(?:.*)\)$/,co=/^(.*) (overflow dmg|damaged): (\d*)(?: \(Crit: (.*)\))?$/,lo=/^Damage insufficient to overcome (?:.*)$/,uo=/^Deflected by (?:.*)$/,fo=/^(?:.*) disabled \(Disruption\)$/,po=/^(.*) detonated$/,go=/^Intercepted by (?:.*)$/,mo=/^Gunslinging -> (?:.*)$/,ho=/^(\d*)_( *)(.*?)(?: <x(\d*|\*)>)?$/,yo=/^(?:.*) (?:breached|damaged|disabled)$/,vo=/^(.*) explodes$/,bo=/^(?:.* penetrates .*)|(?:Penetrated by .*)$/,xo=/^(?:.*) prevented disruption$/,Co=/^(?:.*) prevented critical effect$/,wo=/^(.*) destroyed(?: \(Crit: (.*)\))?$/,Do=/^(?:.*) short circuited$/,Eo=/^(?:.*) triggered(?: by (?:.*))?$/,To=/^\?\?\?$/,ko=/^Redirected by (?:.*)$/,Ao=/(Unknown|Prototype|Alien) (Engine|Power Core|Reactor|Flight Unit|Hover Unit|Leg|Treads|Wheel|Armor|Device|Hackware|Storage|Processor|Ballistic Cannon|Ballistic Gun|Energy Cannon|Energy Gun|Impact Weapon|Launcher|Piercing Weapon|Slashing Weapon|Special Ranged Weapon|Special Weapon)/,jo=/^(?:([^:]*): )?(.*?) (?:follow-up )?(sneak attack )?\((?:[^=)]*=)?(\d+)%\) (?:(\d*)\/(\d*) )?(\w*)$/,So=/^\w{2}-\w{3}\((\w)\)$/,Po=new Map([["u","Artisan"],["T","Borebot"],["Y","Bouncer"],["l","Butcher (5)"],["O","Cobbler"],["k","Decomposer"],["q","Demented"],["D","Dragon"],["E","Elite (4)"],["i","Fireman (5)"],["F","Furnace"],["h","Guerrilla (5)"],["H","Hydra"],["x","Infiltrator (6)"],["K","Knight"],["B","Marauder (6)"],["d","Martyr (5)"],["M","Mutant (5)"],["r","Packrat"],["t","Parasite"],["S","Samaritan"],["b","Savage (5)"],["j","Scrapper (3)"],["R","Subdweller"],["m","Surgeon (4)"],["f","Thief"],["g","Thug (5)"],["c","Tinkerer"],["c","Scientist"],["L","Troll"],["s","Wasp (5)"],["p","Wizard (5)"],["A","Z-Courier"],["Z","Z-Heavy (5)"],["o","Z-Technician"],["z","Zionite"]]),Ro=/^P(\w)-\w{10}$/,Fo=[{name:"Assembled (4)",regex:/^as-\d+$/},{name:"Assembler",regex:/^AS-\d+$/},{name:"Enhanced Q-Series",regex:/^EQ-\d{3}$/},{name:"Golem",regex:/^AG-\d+$/},{name:"Lugger",regex:/^Lugger \d{3}$/},{name:"Q-Series",regex:/^Q\d{3}-\w$/},{name:"Scrapoid (3)",regex:/^\w{5}-D/},{name:"Scraphulk (6)",regex:/^\w{5}-K/},{name:"V-Series",regex:/^V\d{3}-\w$/},{name:"Warlord (Command)",regex:/^ZY-L1N$/},{name:"Z-Experimental (8)",regex:/^Z-Ex$/},{name:"Z-Imprinter",regex:/^Z-Im$/}];class _o{constructor(t){this.ignoredRegexes=[to,ao,ro,no,ft,so,oo,lo,uo,fo,mo,go,yo,bo,xo,ko,Co,Do,Eo],this.currentEntry=pt(),this.lines=t,this.lineIndex=0,this.entries=[]}parseAllLogEntries(){let t;for(;(t=this.getNextLine())&&t!==null;)this.parseLogEntry(t)}getNextLine(){const t=this.peekNextLine();return t!==null&&(this.lineIndex+=1),t}parseDamageEntry(t){const r=co.exec(t.remainingText);if(r===null)return!1;const n=r[1],a=B(r[3],0),o=r[2]==="overflow dmg",i=r[4]??void 0,s=ne();if(dt(n))return!0;if(De(n)||n.toLowerCase()==="core")s.damagedEntity="Cogmind",s.damagedPart=n.toLowerCase()==="core"?"Core":n;else if(n.endsWith("+")&&De(n.slice(0,n.length-1)))s.damagedEntity="Cogmind",s.damagedPart=n.slice(0,n.length-1);else{const{botName:c,partName:f}=Te(n);s.damagedEntity=c,s.damagedPart=f}s.damageOverflow=o,s.damageDealt=a,s.criticalHitType=i,this.currentEntry.damageEntries.push(s);const u=this.peekNextLine();if(u!==null&&u.indent>=t.indent){const c=io.exec(u.remainingText),f=ft.exec(u.remainingText);if(c!==null||f!==null)if(s.damagedPart==="Core")this.getNextLine(),s.targetDestroyed=!0;else if(f!==null){this.getNextLine();const g=ne();g.damagedEntity=s.damagedEntity,g.damagedPart="Core",g.targetDestroyed=!0,this.currentEntry.damageEntries.push(g)}else this.parseDestroyedTarget(this.getNextLine())}return!0}parseDestroyedTarget(t){const r=wo.exec(t.remainingText);if(r===null)return!1;const n=r[1],a=r[2],o=ne();if(dt(n))return!0;let i,s;return De(n)?(i="Cogmind",s=n):{botName:i,partName:s}=Te(n),o.damagedEntity=i,o.damagedPart=s,o.criticalHitType=a,o.targetDestroyed=!0,this.currentEntry.damageEntries.push(o),!0}parseEngineDetonated(t){const r=po.exec(t.remainingText);if(r===null)return!1;const{botName:n,partName:a}=Te(r[1]),o=ne();return o.damagedEntity=n,o.damagedPart=a,o.targetDestroyed=!0,this.currentEntry.damageEntries.push(o),!0}parseIgnoredLine(t){for(const r of this.ignoredRegexes)if(r.exec(t.remainingText)!==null)return!0;return!1}parseLogEntry(t){this.currentEntry=pt();const r=this.currentEntry;if(r.turn=t.turn,!this.parseWeaponAttack(t)&&!this.parseMachineExplosion(t)){if(this.parseDamageEntry(t)||this.parseDestroyedTarget(t)){r.projectilesHit=1,r.projectilesTotal=1,this.entries.push(r);return}this.parseIgnoredLine(t)||t.remainingText.length>0&&console.log(`Skipped non-recognized text ${t.remainingText}`)}}parseMachineExplosion(t){const r=vo.exec(t.remainingText);if(r===null)return!1;const n=this.currentEntry;return n.sourceEntity=r[1],n.sourceWeapon="Explosion",this.parseNestedLines(t),this.entries.push(n),!0}parseNestedLines(t){let r;for(;(r=this.peekNextLine())&&r!==null&&r.indent>t.indent;){const n=this.getNextLine();if(!this.parseDamageEntry(n)){if(this.parseDestroyedTarget(n))continue;if(this.parseEngineDetonated(n))continue;if(this.parseMachineExplosion(n))continue;if(this.parseWeaponAttack(n))continue;if(this.parseIgnoredLine(n))continue;console.log(`Skipped non-recognized nested text ${n.remainingText}`)}}}parseWeaponAttack(t){const r=this.currentEntry,n=jo.exec(t.remainingText);if(n===null){if(To.exec(t.remainingText)===null)return!1;r.sourceEntity="Unknown",r.sourceWeapon="Unknown",r.projectilesHit=1,r.projectilesTotal=1}else{let a;if(n[1]!==void 0?(a=Nt(n[1]),r.sourceEntity=a===void 0?"Unknown":a.Name):r.sourceEntity="Cogmind",r.sourceWeapon=n[2],r.sourceWeapon.endsWith("+")&&(r.sourceWeapon=r.sourceWeapon.slice(0,r.sourceWeapon.length-1)),a!==void 0){const o=Wt(r.sourceWeapon,a);o!==void 0&&(r.sourceWeapon=o)}n[3]!==void 0&&(r.sneakAttack=!0),r.weaponAccuracy=B(n[4],0),n[5]!==void 0&&n[6]!==void 0?(r.projectilesHit=B(n[5],0),r.projectilesTotal=B(n[6],0)):(r.projectilesHit=n[7]==="Hit"?1:0,r.projectilesTotal=1)}return this.parseNestedLines(t),this.entries.push(r),!0}peekNextLine(){return this.lineIndex<this.lines.length?this.lines[this.lineIndex]:null}}function ne(){return{damagedEntity:"",damagedPart:"",criticalHitType:void 0,damageDealt:void 0,damageOverflow:!1,targetDestroyed:!1}}function pt(){return{damageEntries:[],projectilesHit:0,projectilesTotal:0,sourceEntity:"Unknown",sourceWeapon:"Unknown",weaponAccuracy:void 0,sneakAttack:!1,turn:0}}const $o=new Set(["Door","Earth","Reinforced Barrier","Wall"]);function dt(e){return e.endsWith("Trap")?!0:$o.has(e)}function Oo(e){const t=[],r=e.split(`
`);for(let a=0;a<r.length;a++){let o=r[a].trim();a+1<r.length&&r[a+1].startsWith(" ")&&(o+=" "+r[a+1].trim(),a+=1);const i=ho.exec(o);if(i===null){if(t.length>0&&o.length>0){t[t.length-1].remainingText+=" "+o;continue}o.length>0&&!o.includes("Cogmind Combat Log")&&console.log(`Failed to parse log line ${o}`);continue}const s=B(i[1],0),u=i[2].length,c=i[3],f=i[4]===void 0?1:B(i[4],1);for(let g=0;g<f;g++)t.push({indent:u,remainingText:c,turn:s})}const n=new _o(t);return n.parseAllLogEntries(),n.entries}function Te(e){const t=e.split(" ");for(let r=1;r<t.length+1;r++){const n=Nt(t.slice(0,r).join(" "));if(n!==void 0){let a=t.slice(r).join(" ");(a==="core"||a==="")&&(a="Core"),a.endsWith("+")&&(a=a.slice(0,a.length-1));const o=Wt(a,n);return o!==void 0?{botName:n.Name,partName:o}:{botName:n.Name,partName:a}}}for(let r=1;r<t.length;r++){let n=t.slice(r).join(" ");if(n.endsWith("+")&&(n=n.slice(0,n.length-1)),Tt(n)!==void 0||n==="core"||n==="Core"){const o=t.slice(0,r).join(" ");return n==="core"&&(n="Core"),{botName:o,partName:n}}}return console.log(`Failed to split bot and part ${e}`),{botName:"Unknown",partName:"Unknown"}}function Nt(e){let t=Sr(e);if(t!==void 0||(t=te(e),t!==void 0))return t;const r=eo.exec(e);if(r!==null&&(t=jr(r[1]),t!==void 0))return t;const n=So.exec(e);if(n!==null){const o=Po.get(n[1]);if(o===void 0){console.log(`Unexpected derelict class ${n[1]}`);return}else return t=te(o),t===void 0&&console.log(`Bad derelict name ${o}`),t}const a=Ro.exec(e);if(a!==null){const o=`Protovariant ${a[1]}`;return t=te(o),t===void 0&&console.log(`Bad protovariant name ${o}`),t}for(const o of Fo)if(o.regex.exec(e)!==null)return t=te(o.name),t===void 0&&console.log(`Bad special bot name ${o.name}`),t}function Wt(e,t){var n;const r=Ao.exec(e);if(r!==null){const a=r[1]==="Prototype",o=r[1]==="Alien",i=new Set,s=((n=t.Components)==null?void 0:n.concat(t.Armament||[]))||[];for(const u of s)if(typeof u=="string"){const c=Tt(u);if(c===void 0)continue;let f;o?f=c.Rating.includes("**"):a?f=c.Rating.includes("*"):f=!c.Rating.includes("*"),c.Type===r[2]&&f&&i.add(c.Name)}if(i.size===1)return[...i][0]}}function Lo({onParse:e}){const t=s=>{let u=[];for(const c of s){const f=new FileReader;f.onload=()=>{const g=f.result;g!==null&&(u=[...u,...Oo(g)],e(u))},f.readAsText(c)}},{getRootProps:r,getInputProps:n,open:a,isDragActive:o}=It({noClick:!0,onDrop:t}),i=`dropzone-container${o?" dropzone-container-drag-active":""}`;return d.jsxs("div",{className:i,...r(),children:[d.jsx("input",{...n()}),d.jsx("span",{children:"Drag file or browse to upload combat log"}),d.jsx(qt,{tooltipText:"Browse for combat log files.",children:d.jsx("div",{children:d.jsx(ke,{onClick:a,children:"Browse for file"})})}),d.jsx(Yt,{tooltipText:'Combat logs can be exported by setting "combatLogOutput=1" in the advanced settings and setting "combatLogLimit=0". The second setting is needed to prevent the combat log truncating at 1000 lines. The standard Cogmind Options menu setting "Log Output" must also be set to "Text". Advanced settings and combat logs are both located in your standard Cogmind install location. For Steam users, this is typically C:/Program Files (x86)/Steam/steamapps/common/Cogmind/. Combat log scoresheets are in /scores/ and end in _combat.txt.',children:"Help"})]})}const Bo=[{label:"Bar",value:"Bar",tooltip:'Sets charts to display as horizontal bar charts. Only the top 10 categories are shown by default, but an "Other" category can be expanded to show the full list of options.'},{label:"Pie",value:"Pie",tooltip:"Sets charts to display as pie charts. Only the top 10 categories are shown in a pie chart."}],Io=[{label:"Bot",value:"Bot",tooltip:"Groups chart values based on damage dealt to individual bot types."},{label:"Class",value:"Class",tooltip:"Groups chart values based on damage dealt to bot class types."},{label:"Critical",value:"Critical",tooltip:"Groups chart values based on critical hit type (or None)."},{label:"Damage Type",value:"Damage Type",tooltip:"Groups chart values based on the damage type of the weapon used."},{label:"Damaged Part",value:"Part",tooltip:"Groups chart values based on the damaged part."},{label:"Damaged Slot",value:"Slot",tooltip:"Groups chart values based on the damaged slot. Core is considered its own slot."},{label:"Used Weapon",value:"Weapon",tooltip:"Groups chart values based on the weapon used."}];function No(e,t){return d.jsxs(mr,{children:[d.jsx(Wr,{combatLogEntries:e,displayOptions:t}),d.jsx(Hr,{combatLogEntries:e,displayOptions:t}),d.jsx(Zr,{combatLogEntries:e,displayOptions:t}),d.jsx(Qr,{combatLogEntries:e,displayOptions:t}),d.jsx(en,{combatLogEntries:e,displayOptions:t}),d.jsx(Rr,{combatLogEntries:e,displayOptions:t}),d.jsx($r,{combatLogEntries:e,displayOptions:t}),d.jsx(Br,{combatLogEntries:e,displayOptions:t}),d.jsx(Er,{combatLogEntries:e,displayOptions:t}),d.jsx(Gr,{combatLogEntries:e,displayOptions:t}),d.jsx(nn,{combatLogEntries:e,displayOptions:t})]})}function Uo(){const r=[],[n,a]=Qt(),[o,i]=m.useState(!1),[s,u]=m.useState(r),c=o?No(s,n):null;return d.jsxs("div",{className:"page-content",children:[d.jsx(Lo,{onParse:f=>{u(f),i(!0)}}),!1,o&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"page-input-group",children:[d.jsx(Qe,{label:"Chart Type",tooltip:"Sets the display type of all charts.",flexGrowButtonCount:!0,buttons:Bo,selected:n.chartType,onValueChanged:f=>{const g={...n,chartType:f};a(g)}}),d.jsx(Qe,{label:"Chart Category",tooltip:"Sets the category type for all charts. This determines how the combat log is split into pieces.",flexGrowButtonCount:!0,buttons:Io,selected:n.category,onValueChanged:f=>{const g={...n,category:f};a(g)}})]}),c]})]})}export{Uo as default};
